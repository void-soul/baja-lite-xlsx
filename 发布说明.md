# å‘å¸ƒé…ç½®æ€»ç»“

## âœ… å½“å‰é…ç½®ï¼ˆæºç å‘å¸ƒæ¨¡å¼ï¼‰

### å·²å®Œæˆçš„é…ç½®

1. **package.json ä¼˜åŒ–**
   - `"install": "node-gyp rebuild"` - ç”¨æˆ·å®‰è£…æ—¶è‡ªåŠ¨ç¼–è¯‘
   - `"build:dev": "node-gyp rebuild && npm run copy-dlls:dev"` - å¼€å‘æ—¶ä½¿ç”¨
   - ç§»é™¤äº†ç¡¬ç¼–ç çš„ DLL è·¯å¾„ä¾èµ–

2. **.npmignore é…ç½®**
   - æ’é™¤ build/ ç›®å½•ï¼ˆç¼–è¯‘äº§ç‰©ï¼‰
   - æ’é™¤ node_modules/
   - æ’é™¤æµ‹è¯•æ–‡ä»¶
   - æ’é™¤ä¸´æ—¶æ–‡ä»¶

3. **å‘å¸ƒæ–‡æ¡£**
   - âœ… PUBLISH_GUIDE.md - å¼€å‘è€…å‘å¸ƒæŒ‡å—
   - âœ… INSTALLATION.md - ç”¨æˆ·å®‰è£…æŒ‡å—

---

## ğŸ“¦ å‘å¸ƒæµç¨‹

### å¿«é€Ÿå‘å¸ƒï¼ˆæ¨èï¼‰

```bash
# 1. æ¸…ç†å’Œæµ‹è¯•
npm run clean
npm install
npm test
npm run example:json

# 2. æ£€æŸ¥å°†è¦å‘å¸ƒçš„å†…å®¹
npm pack --dry-run

# 3. æ›´æ–°ç‰ˆæœ¬å·
npm version patch  # 1.0.0 -> 1.0.1

# 4. å‘å¸ƒ
npm publish
```

### å‘å¸ƒå†…å®¹æ¸…å•

**ä¼šå‘å¸ƒçš„æ–‡ä»¶:**
- âœ… `src/` - C++ æºä»£ç 
- âœ… `binding.gyp` - ç¼–è¯‘é…ç½®
- âœ… `index.js` - ä¸»å…¥å£
- âœ… `index.d.ts` - TypeScript ç±»å‹å®šä¹‰
- âœ… `package.json`
- âœ… `README.md`
- âœ… `LICENSE`
- âœ… `examples/` - ç¤ºä¾‹ä»£ç ï¼ˆå¯é€‰ï¼‰

**ä¸ä¼šå‘å¸ƒçš„æ–‡ä»¶:**
- âŒ `build/` - ç¼–è¯‘äº§ç‰©
- âŒ `*.node` - äºŒè¿›åˆ¶æ–‡ä»¶
- âŒ `node_modules/`
- âŒ `test/` - æµ‹è¯•æ–‡ä»¶
- âŒ ä¸´æ—¶æ–‡ä»¶å’Œè°ƒè¯•æ–‡ä»¶

---

## ğŸ”§ ç”¨æˆ·å®‰è£…æµç¨‹

### ç”¨æˆ·æ‰§è¡Œ `npm install baja-lite-xlsx` æ—¶å‘ç”Ÿä»€ä¹ˆï¼Ÿ

1. **ä¸‹è½½æºç åŒ…** - ä» npm ä¸‹è½½ä½ å‘å¸ƒçš„æºç 
2. **æ‰§è¡Œ install è„šæœ¬** - è‡ªåŠ¨è¿è¡Œ `node-gyp rebuild`
3. **ç¼–è¯‘ C++ ä»£ç ** - åœ¨ç”¨æˆ·æœºå™¨ä¸Šç¼–è¯‘
4. **ç”Ÿæˆ .node æ–‡ä»¶** - ç¼–è¯‘äº§ç‰©åœ¨ç”¨æˆ·çš„ node_modules/baja-lite-xlsx/build/ ç›®å½•
5. **å®Œæˆå®‰è£…**

### ç”¨æˆ·éœ€è¦çš„ç¯å¢ƒ

**Windows:**
- Visual Studio Build Tools
- Python
- vcpkg + xlnt

**Linux:**
- build-essential
- cmake
- vcpkg + xlnt

**macOS:**
- Xcode Command Line Tools
- cmake  
- vcpkg + xlnt

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç”¨æˆ·å®‰è£…å¯èƒ½é‡åˆ°çš„é—®é¢˜

âŒ **æ²¡æœ‰ç¼–è¯‘ç¯å¢ƒ**
```
gyp ERR! find VS
```
è§£å†³ï¼šå¼•å¯¼ç”¨æˆ·æŸ¥çœ‹ INSTALLATION.md

âŒ **æ‰¾ä¸åˆ° xlnt**
```
fatal error: xlnt/xlnt.hpp: No such file or directory
```
è§£å†³ï¼šéœ€è¦ç”¨æˆ·å®‰è£… vcpkg å’Œ xlnt

âŒ **ç¼–è¯‘æ—¶é—´é•¿**
- é¦–æ¬¡å®‰è£…å¯èƒ½éœ€è¦ 5-10 åˆ†é’Ÿ

### 2. é™ä½ç”¨æˆ·å®‰è£…éš¾åº¦çš„å»ºè®®

#### é€‰é¡¹A: æä¾›è¯¦ç»†æ–‡æ¡£ï¼ˆå½“å‰æ–¹æ¡ˆï¼‰âœ…
- âœ… å·²åˆ›å»º INSTALLATION.md
- âœ… åœ¨ README ä¸­çªå‡ºå®‰è£…è¦æ±‚
- âœ… æä¾›å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

#### é€‰é¡¹B: ä½¿ç”¨ prebuildï¼ˆæœªæ¥ä¼˜åŒ–ï¼‰
```bash
# å®‰è£… prebuild å·¥å…·
npm install --save-dev prebuild prebuild-install

# ä¸ºå„å¹³å°é¢„ç¼–è¯‘
npm run prebuild

# ä¸Šä¼ åˆ° GitHub Releases
npm run upload
```

ä¼˜ç‚¹ï¼šç”¨æˆ·æ— éœ€ç¼–è¯‘ç¯å¢ƒ
ç¼ºç‚¹ï¼šéœ€è¦ç»´æŠ¤å¤šå¹³å°çš„é¢„ç¼–è¯‘åŒ…

---

## ğŸ“‹ å‘å¸ƒå‰æœ€åæ£€æŸ¥

è¿è¡Œä»¥ä¸‹å‘½ä»¤ç¡®ä¿ä¸€åˆ‡æ­£å¸¸ï¼š

```bash
# 1. æ£€æŸ¥ç‰ˆæœ¬å·
cat package.json | grep version

# 2. æ£€æŸ¥å‘å¸ƒå†…å®¹
npm pack --dry-run

# 3. æœ¬åœ°æµ‹è¯•å®‰è£…
mkdir test-install
cd test-install
npm install ../baja-lite-xlsx-1.0.0.tgz
node -e "console.log(require('baja-lite-xlsx'))"

# 4. æ¸…ç†æµ‹è¯•
cd ..
rm -rf test-install
```

---

## ğŸš€ é¦–æ¬¡å‘å¸ƒå®Œæ•´æµç¨‹

```bash
# 1. ç™»å½• npm
npm login

# 2. ç¡®è®¤åŒ…åå¯ç”¨
npm search baja-lite-xlsx

# 3. è®¾ç½®ç‰ˆæœ¬å·
npm version 1.0.0

# 4. é¢„è§ˆå‘å¸ƒå†…å®¹
npm pack --dry-run

# 5. å‘å¸ƒ
npm publish

# 6. éªŒè¯
npm info baja-lite-xlsx

# 7. åœ¨æ–°ç¯å¢ƒæµ‹è¯•å®‰è£…
cd /tmp
mkdir test-baja-lite-xlsx
cd test-baja-lite-xlsx
npm init -y
npm install baja-lite-xlsx
```

---

## ğŸ“ ç‰ˆæœ¬ç®¡ç†å»ºè®®

### è¯­ä¹‰åŒ–ç‰ˆæœ¬ (Semantic Versioning)

- **è¡¥ä¸ç‰ˆæœ¬ (1.0.X)**: Bug ä¿®å¤
  ```bash
  npm version patch
  ```

- **å°ç‰ˆæœ¬ (1.X.0)**: æ–°åŠŸèƒ½ï¼Œå‘åå…¼å®¹
  ```bash
  npm version minor
  ```

- **å¤§ç‰ˆæœ¬ (X.0.0)**: ç ´åæ€§å˜æ›´
  ```bash
  npm version major
  ```

### é¢„å‘å¸ƒç‰ˆæœ¬

```bash
# Beta æµ‹è¯•
npm version prerelease --preid=beta
npm publish --tag beta

# ç”¨æˆ·å®‰è£…
npm install baja-lite-xlsx@beta
```

---

## ğŸ“Š å‘å¸ƒåç›‘æ§

### æŸ¥çœ‹ä¸‹è½½ç»Ÿè®¡
```bash
npm info baja-lite-xlsx
```

æˆ–è®¿é—®ï¼š
- https://www.npmjs.com/package/baja-lite-xlsx
- https://npmtrends.com/baja-lite-xlsx

### æ”¶é›†ç”¨æˆ·åé¦ˆ
- ç›‘æ§ GitHub Issues
- æŸ¥çœ‹ npm åŒ…é¡µé¢çš„é—®é¢˜æŠ¥å‘Š
- ç»Ÿè®¡å®‰è£…æˆåŠŸç‡

---

## ğŸ”„ æŒç»­æ”¹è¿›

1. **æ”¶é›†å®‰è£…é—®é¢˜** - å‰æœŸä¼šæœ‰ç”¨æˆ·åé¦ˆå®‰è£…å›°éš¾
2. **ä¼˜åŒ–æ–‡æ¡£** - æ ¹æ®åé¦ˆæ›´æ–° INSTALLATION.md
3. **è€ƒè™‘ prebuild** - å¦‚æœå®‰è£…é—®é¢˜å¤šï¼Œè€ƒè™‘æä¾›é¢„ç¼–è¯‘åŒ…
4. **æ·»åŠ  CI/CD** - è‡ªåŠ¨åŒ–æµ‹è¯•å’Œå‘å¸ƒæµç¨‹

---

## âœ… æ€»ç»“

**å½“å‰é…ç½®é€‚åˆï¼š**
- âœ… å¼€æºé¡¹ç›®
- âœ… æŠ€æœ¯ç”¨æˆ·
- âœ… å¯æ¥å—ç¼–è¯‘æ—¶é—´
- âœ… éœ€è¦æ”¯æŒå¤šå¹³å°

**å‘å¸ƒå‘½ä»¤ï¼š**
```bash
npm version patch && npm publish
```

**ç”¨æˆ·å®‰è£…ï¼š**
```bash
npm install baja-lite-xlsx
```

éœ€è¦ç”¨æˆ·è‡ªè¡Œå®‰è£…ç¼–è¯‘ç¯å¢ƒå’Œ xlnt åº“ï¼ˆå‚è€ƒ INSTALLATION.mdï¼‰


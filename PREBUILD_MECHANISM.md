# é¢„ç¼–è¯‘åŒ…æŸ¥æ‰¾æœºåˆ¶è¯¦è§£

## ğŸ“¦ å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æ‰§è¡Œ: npm install baja-lite-xlsx                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  npm ä» registry ä¸‹è½½ baja-lite-xlsx@1.0.7                   â”‚
â”‚  å†…å®¹: package.json + index.js + src/ + ...                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  npm æ‰§è¡Œ "install" è„šæœ¬:                                     â”‚
â”‚  prebuild-install --runtime napi || node-gyp rebuild        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  prebuild-install è¯»å– package.json çš„ binary é…ç½®           â”‚
â”‚  {                                                           â”‚
â”‚    "binary": {                                               â”‚
â”‚      "host": "https://github.com/.../releases/download/",   â”‚
â”‚      "remote_path": "{version}",                             â”‚
â”‚      "package_name": "{runtime}-v{abi}-{platform}-{arch}..." â”‚
â”‚    }                                                         â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ„å»ºä¸‹è½½ URL:                                                â”‚
â”‚  https://github.com/void-soul/baja-lite-xlsx/               â”‚
â”‚    releases/download/v1.0.7/napi-v8-win32-x64.tar.gz        â”‚
â”‚                                                              â”‚
â”‚  å‚æ•°æ›¿æ¢:                                                    â”‚
â”‚  - {version}   â†’ v1.0.7   (ä» package.json version å­—æ®µ)     â”‚
â”‚  - {runtime}   â†’ napi     (è¿è¡Œæ—¶ç±»å‹)                        â”‚
â”‚  - {abi}       â†’ 8        (N-API ABI ç‰ˆæœ¬)                   â”‚
â”‚  - {platform}  â†’ win32    (æ“ä½œç³»ç»Ÿ: win32/linux/darwin)     â”‚
â”‚  - {arch}      â†’ x64      (æ¶æ„: x64/arm64)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
                    å°è¯•ä¸‹è½½
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                                 â†“
  âœ… ä¸‹è½½æˆåŠŸ                        âŒ ä¸‹è½½å¤±è´¥
        â†“                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è§£å‹åˆ° build/     â”‚          â”‚ æ‰§è¡Œ node-gyp      â”‚
â”‚ Release/          â”‚          â”‚ rebuild            â”‚
â”‚                   â”‚          â”‚ ï¼ˆæºç ç¼–è¯‘ï¼‰        â”‚
â”‚ baja_xlsx.node    â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
    å®‰è£…å®Œæˆ ğŸ‰
```

---

## ğŸ”§ æ ¸å¿ƒé…ç½®è¯¦è§£

### 1. package.json çš„ binary é…ç½®

```json
{
  "binary": {
    "napi_versions": [3, 4, 5, 6, 7, 8],
    "host": "https://github.com/void-soul/baja-lite-xlsx/releases/download/",
    "remote_path": "{version}",
    "package_name": "{runtime}-v{abi}-{platform}-{arch}.tar.gz"
  }
}
```

**å­—æ®µè¯´æ˜ï¼š**

| å­—æ®µ | ä½œç”¨ | ç¤ºä¾‹å€¼ |
|------|------|--------|
| `napi_versions` | æ”¯æŒçš„ N-API ç‰ˆæœ¬åˆ—è¡¨ | `[3, 4, 5, 6, 7, 8]` |
| `host` | é¢„ç¼–è¯‘åŒ…æ‰˜ç®¡çš„åŸºç¡€ URL | `https://github.com/.../releases/download/` |
| `remote_path` | ç›¸å¯¹è·¯å¾„æ¨¡æ¿ | `{version}` â†’ `v1.0.7` |
| `package_name` | æ–‡ä»¶åæ¨¡æ¿ | `napi-v8-win32-x64.tar.gz` |

---

### 2. URL æ„å»ºè§„åˆ™

**å®Œæ•´ URL æ ¼å¼ï¼š**
```
{host}{remote_path}/{package_name}
```

**å®é™…ç¤ºä¾‹ï¼ˆNode.jsï¼‰ï¼š**
```
https://github.com/void-soul/baja-lite-xlsx/releases/download/v1.0.7/napi-v8-win32-x64.tar.gz
â”‚                                                              â”‚       â”‚                  â”‚
â””â”€ host                                                        â””â”€ remote_path            â””â”€ package_name
```

**å®é™…ç¤ºä¾‹ï¼ˆElectronï¼‰ï¼š**
```
https://github.com/void-soul/baja-lite-xlsx/releases/download/v1.0.7/electron-v34.0-win32-x64.tar.gz
```

---

### 3. å˜é‡æ›¿æ¢è§„åˆ™

| å˜é‡ | è·å–æ–¹å¼ | Windows x64 + Node 20 | Windows x64 + Electron 34 |
|------|---------|----------------------|---------------------------|
| `{version}` | `package.json` çš„ `version` å­—æ®µ + `v` å‰ç¼€ | `v1.0.7` | `v1.0.7` |
| `{runtime}` | å‘½ä»¤è¡Œå‚æ•°æˆ–è‡ªåŠ¨æ£€æµ‹ | `napi` | `electron` |
| `{abi}` | æ ¹æ®è¿è¡Œæ—¶ç‰ˆæœ¬æ˜ å°„ | `8` (N-API v8) | `34.0` (Electron ABI) |
| `{platform}` | `process.platform` | `win32` | `win32` |
| `{arch}` | `process.arch` | `x64` | `x64` |

---

## ğŸ”„ ç‰ˆæœ¬åŒ¹é…æœºåˆ¶

### npm ç‰ˆæœ¬ â†” GitHub Release Tag

**å…³é”®ç‚¹ï¼šç‰ˆæœ¬å·å¿…é¡»å®Œå…¨åŒ¹é…ï¼**

| npm åŒ…ç‰ˆæœ¬ | package.json | Git Tag | GitHub Release | é¢„ç¼–è¯‘åŒ… URL |
|-----------|--------------|---------|----------------|-------------|
| 1.0.7 | `"version": "1.0.7"` | `v1.0.7` | Release v1.0.7 | `.../v1.0.7/napi-v8-...` |
| 1.0.8 | `"version": "1.0.8"` | `v1.0.8` | Release v1.0.8 | `.../v1.0.8/napi-v8-...` |

**æµç¨‹ï¼š**

```bash
# 1. æ›´æ–° package.json ç‰ˆæœ¬
npm version patch  # 1.0.7 â†’ 1.0.8

# 2. Git è‡ªåŠ¨åˆ›å»º tag
git tag v1.0.8     # ç”± npm version è‡ªåŠ¨å®Œæˆ

# 3. æ¨é€åˆ° GitHub
git push origin master --tags

# 4. GitHub Actions è§¦å‘ï¼ˆç›‘å¬ v* tagï¼‰
# æ„å»ºé¢„ç¼–è¯‘åŒ…å¹¶ä¸Šä¼ åˆ° Release v1.0.8

# 5. å‘å¸ƒåˆ° npm
npm publish        # å‘å¸ƒ 1.0.8 ç‰ˆæœ¬

# 6. ç”¨æˆ·å®‰è£…
npm install baja-lite-xlsx@1.0.8
# â†’ prebuild-install æŸ¥æ‰¾ï¼š
#   https://github.com/.../releases/download/v1.0.8/...
```

---

## ğŸ¯ ABI ç‰ˆæœ¬æ˜ å°„

### Node.js (N-API)

`prebuild-install` ä½¿ç”¨ `--runtime napi`ï¼ŒABI ç‰ˆæœ¬å›ºå®šï¼š

| Node.js ç‰ˆæœ¬ | N-API ABI | æ–‡ä»¶å |
|-------------|-----------|--------|
| 16.x | v8 | `napi-v8-win32-x64.tar.gz` |
| 18.x | v8 | `napi-v8-win32-x64.tar.gz` |
| 20.x | v8 | `napi-v8-win32-x64.tar.gz` |

**ä¼˜åŠ¿ï¼š** ä¸€ä¸ªé¢„ç¼–è¯‘åŒ…æ”¯æŒå¤šä¸ª Node.js ç‰ˆæœ¬ï¼

### Electron

æ¯ä¸ª Electron ç‰ˆæœ¬æœ‰ç‹¬ç«‹çš„ ABIï¼š

| Electron ç‰ˆæœ¬ | ABI | æ–‡ä»¶å |
|--------------|-----|--------|
| 34.0.0 | v34.0 | `electron-v34.0-win32-x64.tar.gz` |
| 35.0.0 | v35.0 | `electron-v35.0-win32-x64.tar.gz` |

---

## ğŸ“‚ GitHub Release ç»“æ„

### Release v1.0.7 ç¤ºä¾‹

```
Release: v1.0.7
â”œâ”€ Tag: v1.0.7
â”œâ”€ Assets:
â”‚  â”œâ”€ napi-v8-win32-x64.tar.gz           (çº¦ 800KB)
â”‚  â”‚  â””â”€ build/Release/baja_xlsx.node
â”‚  â”‚
â”‚  â””â”€ electron-v34.0-win32-x64.tar.gz    (çº¦ 800KB)
â”‚     â””â”€ build/Release/baja_xlsx.node
â”‚
â””â”€ Release Notes:
   - æ”¯æŒçš„å¹³å°å’Œç‰ˆæœ¬
   - å®‰è£…è¯´æ˜
   - ...
```

---

## ğŸ§ª è°ƒè¯•é¢„ç¼–è¯‘åŒ…ä¸‹è½½

### æŸ¥çœ‹ prebuild-install çš„è¯¦ç»†æ—¥å¿—

```bash
# æ–¹æ³• 1: è®¾ç½®ç¯å¢ƒå˜é‡
set PREBUILD_INSTALL_DEBUG=1
npm install baja-lite-xlsx

# æ–¹æ³• 2: ç›´æ¥è¿è¡Œ prebuild-install
npx prebuild-install --runtime napi --verbose
```

**è¾“å‡ºç¤ºä¾‹ï¼š**

```
prebuild-install info begin Prebuild-install version 7.1.3
prebuild-install info looking for local prebuild @ prebuilds/napi-v8-win32-x64.tar.gz
prebuild-install info looking for cached prebuild @ C:\Users\...\prebuild\napi-v8-win32-x64.tar.gz
prebuild-install http request https://github.com/void-soul/baja-lite-xlsx/releases/download/v1.0.7/napi-v8-win32-x64.tar.gz
prebuild-install http 200 https://github.com/.../napi-v8-win32-x64.tar.gz
prebuild-install info downloading to @ C:\Users\...\prebuild\napi-v8-win32-x64.tar.gz.tmp
prebuild-install info downloading to @ C:\Users\...\prebuild\napi-v8-win32-x64.tar.gz
prebuild-install info verified @ C:\Users\...\prebuild\napi-v8-win32-x64.tar.gz
prebuild-install info unpacking @ C:\Users\...\prebuild\napi-v8-win32-x64.tar.gz
prebuild-install info success
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚æœ npm ç‰ˆæœ¬æ˜¯ 1.0.7ï¼Œä½† GitHub Release æ˜¯ v1.0.6 ä¼šæ€æ ·ï¼Ÿ

**A:** ä¸‹è½½å¤±è´¥ï¼Œå›é€€åˆ°æºç ç¼–è¯‘ã€‚

```
prebuild-install http 404 https://github.com/.../v1.0.7/napi-v8-win32-x64.tar.gz
prebuild-install WARN install No prebuilt binaries found
â†’ æ‰§è¡Œ node-gyp rebuild
```

**è§£å†³æ–¹æ¡ˆï¼š** ç¡®ä¿ npm ç‰ˆæœ¬å’Œ GitHub Release tag ä¸€è‡´ã€‚

---

### Q2: å¯ä»¥ä¸ºæ—§ç‰ˆæœ¬è¡¥å……é¢„ç¼–è¯‘åŒ…å—ï¼Ÿ

**A:** å¯ä»¥ï¼æ‰‹åŠ¨åˆ›å»ºå¯¹åº”ç‰ˆæœ¬çš„ Release å¹¶ä¸Šä¼ é¢„ç¼–è¯‘åŒ…ã€‚

```bash
# 1. åˆ‡æ¢åˆ°æ—§ç‰ˆæœ¬
git checkout v1.0.5

# 2. æ„å»ºé¢„ç¼–è¯‘åŒ…
npm run build
npx prebuild --runtime napi --target 8

# 3. æ‰‹åŠ¨ä¸Šä¼ åˆ° GitHub Release v1.0.5
# é€šè¿‡ GitHub Web UI æˆ– GitHub CLI
```

---

### Q3: ä¸ºä»€ä¹ˆç”¨ GitHub Releases è€Œä¸æ˜¯ npmï¼Ÿ

**ä¼˜åŠ¿ï¼š**

| GitHub Releases | npm |
|----------------|-----|
| âœ… å…è´¹æ‰˜ç®¡å¤§æ–‡ä»¶ | âŒ åŒ…å¤§å°é™åˆ¶ |
| âœ… å¤šä¸ªé¢„ç¼–è¯‘åŒ…å…±å­˜ | âŒ ä¸€ä¸ªç‰ˆæœ¬ä¸€ä¸ªåŒ… |
| âœ… æŒ‰éœ€ä¸‹è½½ | âŒ å…¨éƒ¨ä¸‹è½½ |
| âœ… CDN åŠ é€Ÿ | âœ… CDN åŠ é€Ÿ |

**npm åŒ…å†…å®¹ï¼š**
- æºä»£ç ï¼ˆå¿…éœ€ï¼‰
- TypeScript ç±»å‹å®šä¹‰
- ç¤ºä¾‹ä»£ç 
- æ–‡æ¡£

**GitHub Releasesï¼š**
- é¢„ç¼–è¯‘åŒ…ï¼ˆå¯é€‰ï¼ŒæŒ‰å¹³å°/è¿è¡Œæ—¶ï¼‰

---

### Q4: å¦‚ä½•æ”¯æŒæ›´å¤šå¹³å°ï¼Ÿ

**ä¿®æ”¹ `.github/workflows/prebuild.yml`ï¼š**

```yaml
strategy:
  matrix:
    include:
      # Windows
      - os: windows-latest
        runtime: napi
        target: 8
      
      # Linux
      - os: ubuntu-latest
        runtime: napi
        target: 8
      
      # macOS
      - os: macos-latest
        runtime: napi
        target: 8
```

æ¯ä¸ªå¹³å°ä¼šç”Ÿæˆç‹¬ç«‹çš„é¢„ç¼–è¯‘åŒ…ï¼š
- `napi-v8-win32-x64.tar.gz`
- `napi-v8-linux-x64.tar.gz`
- `napi-v8-darwin-x64.tar.gz`
- `napi-v8-darwin-arm64.tar.gz` (Apple Silicon)

---

## ğŸ¯ æœ€ä½³å®è·µ

### âœ… å‘å¸ƒæµç¨‹æ£€æŸ¥æ¸…å•

```bash
# 1. ç¡®ä¿ä»£ç å·²æäº¤
git status

# 2. æ›´æ–°ç‰ˆæœ¬ï¼ˆä¼šè‡ªåŠ¨åˆ›å»º git tagï¼‰
npm version patch

# 3. æ¨é€ä»£ç å’Œ tag
git push origin master --tags

# 4. ç­‰å¾… GitHub Actions å®Œæˆï¼ˆçº¦ 10-12 åˆ†é’Ÿï¼‰
# æŸ¥çœ‹ https://github.com/void-soul/baja-lite-xlsx/actions

# 5. éªŒè¯ Release åˆ›å»ºæˆåŠŸ
# æŸ¥çœ‹ https://github.com/void-soul/baja-lite-xlsx/releases/latest

# 6. å‘å¸ƒåˆ° npm
npm publish

# 7. æµ‹è¯•å®‰è£…ï¼ˆåœ¨å¹²å‡€ç¯å¢ƒï¼‰
npm install baja-lite-xlsx@latest
```

---

## ğŸ“Š ç”¨æˆ·å®‰è£…ä½“éªŒå¯¹æ¯”

### Windows x64 + Node 20 ç”¨æˆ·

```bash
npm install baja-lite-xlsx

# è¾“å‡º:
> baja-lite-xlsx@1.0.7 install
> prebuild-install --runtime napi || node-gyp rebuild

prebuild-install info begin
prebuild-install http request GET https://github.com/.../v1.0.7/napi-v8-win32-x64.tar.gz
prebuild-install http 200 https://github.com/.../napi-v8-win32-x64.tar.gz
prebuild-install info success

âœ… è€—æ—¶: ~10 ç§’
âœ… æ— éœ€ç¼–è¯‘ç¯å¢ƒ
```

### Linux ç”¨æˆ·ï¼ˆæ— é¢„ç¼–è¯‘åŒ…ï¼‰

```bash
npm install baja-lite-xlsx

# è¾“å‡º:
> baja-lite-xlsx@1.0.7 install
> prebuild-install --runtime napi || node-gyp rebuild

prebuild-install WARN install No prebuilt binaries found (tried 1 download)
gyp info spawn make
gyp info spawn args [ 'BUILDTYPE=Release', '-C', 'build' ]
...

âš™ï¸ è€—æ—¶: ~3-5 åˆ†é’Ÿ
âš™ï¸ éœ€è¦ç¼–è¯‘ç¯å¢ƒï¼ˆgcc, make, cmakeï¼‰
```

---

## ğŸ”— ç›¸å…³èµ„æº

- [prebuild-install æ–‡æ¡£](https://github.com/prebuild/prebuild-install)
- [prebuild æ–‡æ¡£](https://github.com/prebuild/prebuild)
- [GitHub Releases API](https://docs.github.com/en/rest/releases)
- [N-API ç‰ˆæœ¬çŸ©é˜µ](https://nodejs.org/api/n-api.html#node-api-version-matrix)

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0.8  
**æœ€åæ›´æ–°ï¼š** 2025-10-21

